# PubSpy 扩展测试指南

## 安装测试

### 步骤1: 准备图标文件
由于manifest.json引用了图标文件，需要先创建或下载以下图标：
- `icons/icon16.png` (16x16像素)
- `icons/icon32.png` (32x32像素)
- `icons/icon48.png` (48x48像素)
- `icons/icon128.png` (128x128像素)

可以使用任何16x16到128x128的PNG图片文件进行测试。

### 步骤2: 安装到Chrome
1. 打开Chrome浏览器
2. 地址栏输入：`chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择 `PubSpy-Extension` 文件夹
6. 如果安装成功，会在扩展列表中看到PubSpy

## 功能测试

### 测试1: AdSense检测功能
1. 访问包含AdSense广告的网站，例如：
   - 各大新闻网站
   - 博客网站
   - 内容门户网站
2. 点击浏览器工具栏中的PubSpy图标
3. 查看"当前网站分析"区域是否显示检测到的AdSense ID
4. 验证检测状态是否正确显示

### 测试2: 域名搜索功能
1. 在检测到AdSense ID后
2. 点击"查找相关域名"按钮
3. 观察加载状态显示
4. 验证是否显示模拟的搜索结果
5. 检查域名列表格式是否正确

### 测试3: CSV导出功能
1. 在找到相关域名后
2. 点击"导出CSV"按钮
3. 验证是否成功下载CSV文件
4. 打开CSV文件检查数据格式

### 测试4: 界面响应测试
1. 测试各个按钮的启用/禁用状态
2. 验证加载动画是否正常显示
3. 检查统计数字是否正确更新
4. 测试"重新检测"按钮功能

## 调试方法

### 1. 查看扩展控制台
- 在 `chrome://extensions/` 页面
- 找到PubSpy扩展
- 点击"检查视图: 服务工作线程"
- 查看background.js的控制台输出

### 2. 调试popup界面
- 右键点击扩展图标
- 选择"检查"
- 在开发者工具中查看popup的控制台和网络请求

### 3. 调试content script
- 在任何网页上按F12打开开发者工具
- 在控制台中查看content.js的输出

## 常见问题

### 问题1: 扩展无法加载
- 检查manifest.json语法是否正确
- 确认所有引用的文件都存在
- 查看扩展页面的错误信息

### 问题2: 检测不到AdSense ID
- 确认访问的网站确实包含AdSense广告
- 检查content.js是否正确注入
- 查看浏览器控制台的错误信息

### 问题3: 域名搜索失败
- 目前使用模拟数据，搜索应该总是成功
- 如果失败，检查background.js的控制台输出

## 改进建议

基础框架完成后，可以考虑以下改进：

1. **真实API集成**
   - 配置Google Custom Search API
   - 集成BuiltWith或其他广告情报API

2. **UI/UX优化**
   - 添加设置页面
   - 改进加载状态显示
   - 增加快捷键支持

3. **功能增强**
   - 添加域名收藏功能
   - 支持批量导出
   - 增加历史记录

4. **性能优化**
   - 改进缓存机制
   - 优化大量数据的处理
   - 减少内存使用

## 发布准备

要发布到Chrome Web Store，还需要：
1. 设计专业的图标和截图
2. 编写详细的商店描述
3. 准备隐私政策
4. 测试各种边缘情况
5. 添加错误处理和用户反馈机制