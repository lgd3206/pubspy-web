# PubSpy 扩展安装和测试指南

## 🚀 Chrome扩展安装方法

### 方法一：开发者模式安装
1. **打开Chrome扩展管理页面**
   - 在地址栏输入：`chrome://extensions/`
   - 或者：Chrome菜单 → 更多工具 → 扩展程序

2. **开启开发者模式**
   - 在页面右上角找到"开发者模式"开关
   - 点击开启开发者模式

3. **加载扩展**
   - 点击"加载已解压的扩展程序"按钮
   - 选择 `PubSpy-Extension` 文件夹
   - 确保选择的是包含 `manifest.json` 的根目录

4. **验证安装**
   - 扩展应该出现在扩展列表中
   - 浏览器工具栏会显示PubSpy图标
   - 如果没有显示，点击扩展拼图图标，然后固定PubSpy扩展

## 🧪 功能测试指南

### 测试1：基础功能验证
1. **访问包含AdSense的网站**
   ```
   推荐测试网站：
   - https://developers.google.com/adsense
   - https://support.google.com/adsense
   - 任何使用AdSense的博客或新闻网站
   ```

2. **测试AdSense检测**
   - 点击浏览器工具栏中的PubSpy图标
   - 查看是否能检测到AdSense ID
   - 检测到的ID格式应为：ca-pub-xxxxxxxxxxxxxxxx

3. **测试域名搜索**
   - 如果检测到AdSense ID，点击"查找相关域名"
   - 等待搜索结果（可能需要1-2分钟）
   - 查看是否返回相关域名列表

### 测试2：API功能验证
1. **打开浏览器开发者工具**
   - 按F12或右键 → 检查
   - 切换到Console标签

2. **运行测试脚本**
   ```javascript
   // 复制以下代码到Console并回车
   fetch('test-api.js')
     .then(response => response.text())
     .then(code => eval(code))
     .then(() => testPubSpy())
   ```

3. **查看测试结果**
   - 测试脚本会自动验证API功能
   - 查看控制台输出的测试结果

### 测试3：网页版功能验证
1. **启动网页版**
   - 确保网页版服务正在运行：http://localhost:3000
   - 如果没有运行，执行：`cd pubspy-web && npm run dev`

2. **测试手动搜索**
   - 在"手动搜索"输入框中输入：`ca-pub-3940256099942544`
   - 点击"开始搜索"按钮
   - 等待搜索结果

3. **测试URL分析**
   - 在"URL分析"输入框中输入任何网站URL
   - 点击"开始分析"按钮
   - 查看分析结果

## 🔧 故障排除

### 扩展安装问题
**问题：扩展无法加载**
- 检查文件夹结构，确保包含 `manifest.json`
- 检查 `manifest.json` 语法是否正确
- 查看扩展管理页面的错误信息

**问题：扩展图标不显示**
- 点击浏览器地址栏右侧的拼图图标
- 找到PubSpy扩展并点击固定图标

### 功能测试问题
**问题：无法检测到AdSense ID**
- 确保网站确实包含AdSense广告
- 尝试刷新页面后重新检测
- 某些网站可能使用动态加载，需要等待页面完全加载

**问题：域名搜索超时或失败**
- 检查网络连接
- 可能是API调用限制，稍后重试
- 查看浏览器控制台的错误信息

### API连接问题
**问题：Google Search API连接失败**
- 检查API密钥是否正确配置
- 确认网络能够访问Google服务
- 检查API配额是否已用完

## 📋 测试检查清单

### Chrome扩展
- [ ] 扩展成功安装
- [ ] 扩展图标显示在工具栏
- [ ] 能够检测AdSense ID
- [ ] 域名搜索功能正常
- [ ] CSV导出功能正常
- [ ] 界面响应和交互正常

### 网页版
- [ ] 服务器成功启动
- [ ] 主页面正常加载
- [ ] 手动搜索功能正常
- [ ] URL分析功能正常
- [ ] API集成正常工作
- [ ] 数据导出功能正常

### API功能
- [ ] Google Search API连接正常
- [ ] 域名验证功能正常
- [ ] 错误处理机制正常
- [ ] 缓存机制正常工作

## 🎯 性能基准

### 预期性能指标
- **AdSense检测时间**：< 2秒
- **域名搜索时间**：30-120秒（取决于网络和API响应）
- **扩展响应时间**：< 1秒
- **检测准确率**：> 95%（对于标准AdSense实现）

### 资源使用
- **内存使用**：< 50MB
- **CPU使用**：检测时 < 10%
- **网络使用**：仅在搜索时产生流量

## 📞 支持和反馈

如果遇到问题，请：
1. 查看浏览器控制台的错误信息
2. 检查网络连接状态
3. 确认API配置正确
4. 尝试在不同网站上测试

成功测试后，系统就可以投入使用了！